{"ast":null,"code":"import _slicedToArray from\"C:/Users/licos/Desktop/projects/shop_online/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useEffect,useState}from'react';import{Container,Row,Col}from'react-bootstrap';import GenderBar from'../components/GenderBar';import TypeBar from'../components/TypeBar';import ProductList from'../components/ProductList';import{observer}from'mobx-react-lite';import{Context}from'..';import{fetchGenders,fetchTypes,fetchProducts,fetchProperties}from'../http/productAPI';import Pages from'../components/Pages';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ShopPage=observer(function(){var _useContext=useContext(Context),product=_useContext.product;var _useState=useState(1),_useState2=_slicedToArray(_useState,2),currentPage=_useState2[0],setCurrenctPage=_useState2[1];useEffect(function(){fetchTypes().then(function(data){return product.setTypes(data);});fetchGenders().then(function(data){return product.setGenders(data);});fetchProperties().then(function(data){return product.setProperties(data);});fetchProducts(null,null,product.limit,currentPage).then(function(data){product.setProducts(data.rows);product.setTotalCount(data.count);});},[]);useEffect(function(){fetchProducts(product.selectedType.id,product.selectedGender.id,product.limit,product.page).then(function(data){product.setProducts(data.rows);product.setTotalCount(data.count);});},[product.page,product.selectedType,product.selectedGender]);//add Pages later\nreturn/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsxs(Row,{className:\"mt-2\",children:[/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsx(TypeBar,{})}),/*#__PURE__*/_jsxs(Col,{md:9,children:[/*#__PURE__*/_jsx(GenderBar,{}),/*#__PURE__*/_jsx(ProductList,{})]})]})});});export default ShopPage;","map":{"version":3,"sources":["C:/Users/licos/Desktop/projects/shop_online/client/src/pages/Shop.js"],"names":["React","useContext","useEffect","useState","Container","Row","Col","GenderBar","TypeBar","ProductList","observer","Context","fetchGenders","fetchTypes","fetchProducts","fetchProperties","Pages","ShopPage","product","currentPage","setCurrenctPage","then","data","setTypes","setGenders","setProperties","limit","setProducts","rows","setTotalCount","count","selectedType","id","selectedGender","page"],"mappings":"yKAAA,MAAOA,CAAAA,KAAP,EAAgBC,UAAhB,CAA4BC,SAA5B,CAAuCC,QAAvC,KAAuD,OAAvD,CACA,OAASC,SAAT,CAAoBC,GAApB,CAAyBC,GAAzB,KAAmC,iBAAnC,CACA,MAAOC,CAAAA,SAAP,KAAsB,yBAAtB,CACA,MAAOC,CAAAA,OAAP,KAAoB,uBAApB,CACA,MAAOC,CAAAA,WAAP,KAAwB,2BAAxB,CACA,OAASC,QAAT,KAAyB,iBAAzB,CACA,OAASC,OAAT,KAAwB,IAAxB,CACA,OAASC,YAAT,CAAuBC,UAAvB,CAAmCC,aAAnC,CAAkDC,eAAlD,KAAyE,oBAAzE,CACA,MAAOC,CAAAA,KAAP,KAAkB,qBAAlB,C,wFAEA,GAAMC,CAAAA,QAAQ,CAAGP,QAAQ,CAAC,UAAM,CAE9B,gBAAkBT,UAAU,CAACU,OAAD,CAA5B,CAAOO,OAAP,aAAOA,OAAP,CACA,cAAuCf,QAAQ,CAAC,CAAD,CAA/C,wCAAOgB,WAAP,eAAoBC,eAApB,eAEAlB,SAAS,CAAC,UAAM,CACdW,UAAU,GAAGQ,IAAb,CAAkB,SAAAC,IAAI,QAAIJ,CAAAA,OAAO,CAACK,QAAR,CAAiBD,IAAjB,CAAJ,EAAtB,EACAV,YAAY,GAAGS,IAAf,CAAoB,SAAAC,IAAI,QAAIJ,CAAAA,OAAO,CAACM,UAAR,CAAmBF,IAAnB,CAAJ,EAAxB,EACAP,eAAe,GAAGM,IAAlB,CAAuB,SAAAC,IAAI,QAAIJ,CAAAA,OAAO,CAACO,aAAR,CAAsBH,IAAtB,CAAJ,EAA3B,EACAR,aAAa,CAAC,IAAD,CAAO,IAAP,CAAaI,OAAO,CAACQ,KAArB,CAA4BP,WAA5B,CAAb,CAAsDE,IAAtD,CAA2D,SAAAC,IAAI,CAAI,CACjEJ,OAAO,CAACS,WAAR,CAAoBL,IAAI,CAACM,IAAzB,EACAV,OAAO,CAACW,aAAR,CAAsBP,IAAI,CAACQ,KAA3B,EACD,CAHD,EAID,CARQ,CAQN,EARM,CAAT,CAUA5B,SAAS,CAAC,UAAM,CACdY,aAAa,CAACI,OAAO,CAACa,YAAR,CAAqBC,EAAtB,CAA0Bd,OAAO,CAACe,cAAR,CAAuBD,EAAjD,CAAqDd,OAAO,CAACQ,KAA7D,CAAoER,OAAO,CAACgB,IAA5E,CAAb,CAA+Fb,IAA/F,CAAoG,SAAAC,IAAI,CAAI,CAC1GJ,OAAO,CAACS,WAAR,CAAoBL,IAAI,CAACM,IAAzB,EACAV,OAAO,CAACW,aAAR,CAAsBP,IAAI,CAACQ,KAA3B,EACH,CAHC,EAGC,CAJM,CAIJ,CAACZ,OAAO,CAACgB,IAAT,CAAehB,OAAO,CAACa,YAAvB,CAAqCb,OAAO,CAACe,cAA7C,CAJI,CAAT,CAMA;AACA,mBACC,KAAC,SAAD,wBACE,MAAC,GAAD,EAAK,SAAS,CAAC,MAAf,wBACE,KAAC,GAAD,EAAK,EAAE,CAAE,CAAT,uBACG,KAAC,OAAD,IADH,EADF,cAIE,MAAC,GAAD,EAAK,EAAE,CAAE,CAAT,wBACG,KAAC,SAAD,IADH,cAEG,KAAC,WAAD,IAFH,GAJF,GADF,EADD,CAcD,CApCwB,CAAzB,CAsCA,cAAehB,CAAAA,QAAf","sourcesContent":["import React, { useContext, useEffect, useState } from 'react'\r\nimport { Container, Row, Col} from 'react-bootstrap';\r\nimport GenderBar from '../components/GenderBar';\r\nimport TypeBar from '../components/TypeBar'\r\nimport ProductList from '../components/ProductList'\r\nimport { observer } from 'mobx-react-lite'\r\nimport { Context } from '..'\r\nimport { fetchGenders, fetchTypes, fetchProducts, fetchProperties } from '../http/productAPI';\r\nimport Pages from '../components/Pages';\r\n\r\nconst ShopPage = observer(() => {\r\n\r\n  const {product} = useContext(Context)\r\n  const [currentPage, setCurrenctPage] = useState(1)\r\n\r\n  useEffect(() => {\r\n    fetchTypes().then(data => product.setTypes(data))\r\n    fetchGenders().then(data => product.setGenders(data))\r\n    fetchProperties().then(data => product.setProperties(data))\r\n    fetchProducts(null, null, product.limit, currentPage).then(data => {\r\n      product.setProducts(data.rows)\r\n      product.setTotalCount(data.count)\r\n    })\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    fetchProducts(product.selectedType.id, product.selectedGender.id, product.limit, product.page).then(data => {\r\n      product.setProducts(data.rows)\r\n      product.setTotalCount(data.count)\r\n  })}, [product.page, product.selectedType, product.selectedGender])\r\n\r\n  //add Pages later\r\n  return (\r\n   <Container>\r\n     <Row className=\"mt-2\">\r\n       <Col md={3}>\r\n          <TypeBar />\r\n       </Col>\r\n       <Col md={9}>\r\n          <GenderBar />\r\n          <ProductList />\r\n         \r\n       </Col>\r\n     </Row>\r\n   </Container>\r\n  )\r\n})\r\n\r\nexport default ShopPage;"]},"metadata":{},"sourceType":"module"}