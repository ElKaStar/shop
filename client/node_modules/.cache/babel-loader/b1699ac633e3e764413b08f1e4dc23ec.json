{"ast":null,"code":"import _slicedToArray from\"C:/Users/licos/Desktop/projects/shop_online/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useEffect,useState}from'react';import{Context}from'../index';import Navbar from'react-bootstrap/Navbar';import Nav from'react-bootstrap/Nav';import Form from'react-bootstrap/Form';import FormControl from'react-bootstrap/FormControl';import Button from'react-bootstrap/Button';import{NavLink}from'react-router-dom';import{fetchCartProductsByCartId,fetchCart}from'../http/productAPI';import{ADMIN_ROUTE,LOGIN_ROUTE,SHOP_ROUTE,ABOUT_ROUTE,DELIVERY_ROUTE,HOWTO_ROUTE,HOME_ROUTE,PROFILE_ROUTE}from'../utils/consts';import{observer}from'mobx-react-lite';import{Container,Row}from'react-bootstrap';import{useHistory}from'react-router-dom';import CartModal from'./Modals/CartModal';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var NavBar=observer(function(){var _useContext=useContext(Context),user=_useContext.user,product=_useContext.product;var history=useHistory();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isCartOpen=_useState2[0],setIsCartOpen=_useState2[1];var logOut=function logOut(){user.setUser({});user.setIsAuth(false);};useEffect(function(){if(!user||!user.hasOwnProperty('user')||!user.user.hasOwnProperty('id')||!user.user.id){}else{fetchCart(user.user.id).then(function(data){if(!data||data.result==='not found'){}else{product.setCart(data.id);fetchCartProductsByCartId(data.id).then(function(data){product.setCartProducts(data);});}});}},[]);var clickCartHandler=function clickCartHandler(){setIsCartOpen(true);fetchCartProductsByCartId(product.cart).then(function(data){product.setCartProducts(data);});};return/*#__PURE__*/_jsxs(Navbar,{expand:\"xl\",id:\"navbar\",style:{boxShadow:\"10px 7px 5px 0px rgba(68,65,79,0.25)\",zIndex:\"99\"},children:[/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(NavLink,{className:\"lable\",style:{color:'black',marginLeft:'10px',textDecoration:'none',marginRight:'20px',borderRadius:'50%'},to:HOME_ROUTE,children:\"MiniLi\"}),/*#__PURE__*/_jsx(Navbar.Toggle,{\"aria-controls\":\"basic-navbar-nav\"}),/*#__PURE__*/_jsxs(Navbar.Collapse,{id:\"basic-navbar-nav\",children:[/*#__PURE__*/_jsxs(Nav,{className:\"mr-auto\",children:[/*#__PURE__*/_jsx(NavLink,{className:\"link\",style:{color:'#52527a',textDecoration:'none',borderRadius:'5px'},to:SHOP_ROUTE,children:\"\\u041A\\u0430\\u0442\\u0430\\u043B\\u043E\\u0433\"}),/*#__PURE__*/_jsx(NavLink,{className:\"link\",style:{color:'#52527a',textDecoration:'none'},to:ABOUT_ROUTE,children:\"\\u041E \\u041D\\u0430\\u0441\"}),/*#__PURE__*/_jsx(NavLink,{className:\"link\",style:{marginLeft:'10px',color:'#52527a',textDecoration:'none'},to:HOWTO_ROUTE,children:\"\\u041A\\u0430\\u043A \\u0441\\u043D\\u044F\\u0442\\u044C \\u043C\\u0435\\u0440\\u043A\\u0438\"}),/*#__PURE__*/_jsx(NavLink,{className:\"link\",style:{marginLeft:'10px',color:'#52527a',textDecoration:'none'},to:DELIVERY_ROUTE,children:\"\\u041E\\u043F\\u043B\\u0430\\u0442\\u0430 \\u0438 \\u0434\\u043E\\u0441\\u0442\\u0430\\u0432\\u043A\\u0430\"})]}),/*#__PURE__*/_jsxs(Nav,{children:[user.isAuth?/*#__PURE__*/_jsxs(Nav,{className:\"ml-auto\",children:[/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return history.push(ADMIN_ROUTE);},variant:\"outline-dark\",children:\"\\u0410\\u0434\\u043C\\u0438\\u043D \\u043F\\u0430\\u043D\\u0435\\u043B\\u044C\"}),/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return logOut();},variant:\"outline-dark\",className:\"mr-2 ml-2\",children:\"\\u0412\\u044B\\u0439\\u0442\\u0438\"})]}):/*#__PURE__*/_jsx(Nav,{className:\"ml-auto\",children:/*#__PURE__*/_jsx(Button,{variant:\"outline-dark\",onClick:function onClick(){return history.push(LOGIN_ROUTE);},className:\"mr-2 ml-2\",children:\"Log In\"})}),/*#__PURE__*/_jsx(Nav,{className:\"ml-auto\",children:/*#__PURE__*/_jsx(Button,{variant:\"outline-dark\",onClick:function onClick(){return clickCartHandler();},children:\"\\u041A\\u043E\\u0440\\u0437\\u0438\\u043D\\u0430\"})}),/*#__PURE__*/_jsx(Nav,{className:\"ml-2\",children:/*#__PURE__*/_jsx(Button,{variant:\"outline-dark\",onClick:function onClick(){return history.push(PROFILE_ROUTE);},children:\"\\u041F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044C\"})})]})]})]}),/*#__PURE__*/_jsx(CartModal,{show:isCartOpen,onHide:function onHide(){return setIsCartOpen(false);}})]});});export default NavBar;","map":{"version":3,"sources":["C:/Users/licos/Desktop/projects/shop_online/client/src/components/NavBar.js"],"names":["React","useContext","useEffect","useState","Context","Navbar","Nav","Form","FormControl","Button","NavLink","fetchCartProductsByCartId","fetchCart","ADMIN_ROUTE","LOGIN_ROUTE","SHOP_ROUTE","ABOUT_ROUTE","DELIVERY_ROUTE","HOWTO_ROUTE","HOME_ROUTE","PROFILE_ROUTE","observer","Container","Row","useHistory","CartModal","NavBar","user","product","history","isCartOpen","setIsCartOpen","logOut","setUser","setIsAuth","hasOwnProperty","id","then","data","result","setCart","setCartProducts","clickCartHandler","cart","boxShadow","zIndex","color","marginLeft","textDecoration","marginRight","borderRadius","isAuth","push"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useState } from 'react'\r\nimport { Context } from '../index'\r\nimport Navbar from 'react-bootstrap/Navbar'\r\nimport Nav from 'react-bootstrap/Nav'\r\nimport Form from 'react-bootstrap/Form'\r\nimport FormControl from 'react-bootstrap/FormControl'\r\nimport Button from 'react-bootstrap/Button'\r\nimport { NavLink } from 'react-router-dom'\r\nimport { fetchCartProductsByCartId, fetchCart } from '../http/productAPI'\r\nimport { ADMIN_ROUTE, LOGIN_ROUTE, SHOP_ROUTE, ABOUT_ROUTE, DELIVERY_ROUTE, HOWTO_ROUTE, HOME_ROUTE, PROFILE_ROUTE } from '../utils/consts'\r\nimport { observer } from 'mobx-react-lite'\r\nimport { Container, Row } from 'react-bootstrap'\r\nimport { useHistory } from 'react-router-dom'\r\nimport CartModal from './Modals/CartModal'\r\n\r\n\r\nconst NavBar = observer(() => {\r\n    const { user, product } = useContext(Context)\r\n    const history = useHistory()\r\n    const [isCartOpen, setIsCartOpen] = useState(false)\r\n\r\n    const logOut = () => {\r\n        user.setUser({})\r\n        user.setIsAuth(false)\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (!user || !user.hasOwnProperty('user') || !user.user.hasOwnProperty('id') || !user.user.id) {\r\n        } else {\r\n            fetchCart(user.user.id).then(data => {\r\n                if (!data || data.result === 'not found') {\r\n                } else {\r\n                    product.setCart(data.id)\r\n                    fetchCartProductsByCartId(data.id).then(data => {\r\n                        product.setCartProducts(data)\r\n                    })\r\n                }\r\n            })\r\n        }\r\n\r\n    }, [])\r\n\r\n    const clickCartHandler = () => {\r\n        setIsCartOpen(true)\r\n        fetchCartProductsByCartId(product.cart).then(data => {\r\n            product.setCartProducts(data)\r\n        })\r\n    }\r\n\r\n\r\n    return (\r\n        <Navbar expand=\"xl\" id=\"navbar\" style={{ boxShadow: \"10px 7px 5px 0px rgba(68,65,79,0.25)\", zIndex: \"99\" }}>\r\n            <Container>\r\n                <NavLink className=\"lable\" style={{ color: 'black', marginLeft: '10px', textDecoration: 'none', marginRight: '20px', borderRadius: '50%' }} to={HOME_ROUTE}>MiniLi</NavLink>\r\n                <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\r\n                <Navbar.Collapse id=\"basic-navbar-nav\">\r\n                    <Nav className=\"mr-auto\">\r\n                        <NavLink className=\"link\" style={{ color: '#52527a', textDecoration: 'none', borderRadius: '5px' }} to={SHOP_ROUTE}>Каталог</NavLink>\r\n                        <NavLink className=\"link\" style={{ color: '#52527a', textDecoration: 'none' }} to={ABOUT_ROUTE}>О Нас</NavLink>\r\n                        <NavLink className=\"link\" style={{ marginLeft: '10px', color: '#52527a', textDecoration: 'none' }} to={HOWTO_ROUTE}>Как снять мерки</NavLink>\r\n                        <NavLink className=\"link\" style={{ marginLeft: '10px', color: '#52527a', textDecoration: 'none' }} to={DELIVERY_ROUTE}>Оплата и доставка</NavLink>\r\n\r\n                    </Nav>\r\n                    <Nav>\r\n                        {user.isAuth ?\r\n                            <Nav className=\"ml-auto\">\r\n                                <Button onClick={() => history.push(ADMIN_ROUTE)} variant={\"outline-dark\"}>Админ панель</Button>\r\n                                <Button onClick={() => logOut()} variant={\"outline-dark\"} className=\"mr-2 ml-2\">Выйти</Button>\r\n                            </Nav>\r\n                            :\r\n                            <Nav className=\"ml-auto\">\r\n                                <Button variant={\"outline-dark\"} onClick={() => history.push(LOGIN_ROUTE)} className=\"mr-2 ml-2\">Log In</Button>\r\n                            </Nav>\r\n                        }\r\n                        <Nav className=\"ml-auto\">\r\n                            <Button variant={\"outline-dark\"} onClick={() => clickCartHandler()}>Корзина</Button>\r\n                        </Nav>\r\n                        <Nav className=\"ml-2\">\r\n                            <Button variant={\"outline-dark\"} onClick={() => history.push(PROFILE_ROUTE)}>Профиль</Button>\r\n                        </Nav>\r\n\r\n\r\n                    </Nav>\r\n                </Navbar.Collapse>\r\n            </Container>\r\n            <CartModal show={isCartOpen} onHide={() => setIsCartOpen(false)} />\r\n        </Navbar>\r\n    )\r\n})\r\n\r\nexport default NavBar;"]},"metadata":{},"sourceType":"module"}