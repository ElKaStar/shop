{"ast":null,"code":"import _slicedToArray from\"C:/Users/licos/Desktop/projects/shop_online/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState,useContext}from'react';import{Modal,Button,Form,Container,Row,Col,Spinner}from'react-bootstrap';import{deleteProductFrCartProducts,fetchCartProductsByCartId,changeCartProducts,sendCart}from'./../../http/productAPI';import{observer}from'mobx-react-lite';import{Context}from'./../../index';//import { createGender } from '../../http/productAPI'\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CartModal=observer(function(_ref){var show=_ref.show,onHide=_ref.onHide;var _useContext=useContext(Context),product=_useContext.product,user=_useContext.user;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),cartInfo=_useState2[0],setCartInfo=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),phone=_useState4[0],setPhone=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),address=_useState6[0],setAddress=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),images=_useState8[0],setImages=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),gotImages=_useState10[0],setGotImages=_useState10[1];if(!product.cartProducts){console.log('NONONO');}var handlePhoneChange=function handlePhoneChange(e){var val=e.target.value;setPhone(val);};var handleAddressChange=function handleAddressChange(e){var userAddress=e.target.value;setAddress(userAddress);};var totalAmount=0;if(show){console.log(user);product.cartProducts.forEach(function(element){totalAmount=element.price*element.quantity+totalAmount;});}var deleteProduct=function deleteProduct(productId){console.log('product',product.cart);deleteProductFrCartProducts(product.cart,productId).then(function(data){console.log(data);}).finally(function(){fetchCartProductsByCartId(product.cart).then(function(data){product.setCartProducts(data);});});};var changeQuantityHandler=function changeQuantityHandler(newQuantity,productId){if(newQuantity===0){//delete from cart\ndeleteProduct(productId);}else{changeCartProducts(product.cart,productId,newQuantity).then(function(data){fetchCartProductsByCartId(product.cart).then(function(data){product.setCartProducts(data);});});}};var sendOrder=function sendOrder(){sendCart(product.cart).then(function(data){console.log(data);}).finally(function(){onHide();product.setCartProducts([]);product.setCart(null);alert('Заказ отправлен');});};return/*#__PURE__*/_jsxs(Modal,{show:show,onHide:onHide,size:\"lg\",top:true,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{id:\"contained-modal-title-vcenter\",children:\"\\u0412\\u0430\\u0448 \\u0437\\u0430\\u043A\\u0430\\u0437\"})}),/*#__PURE__*/_jsxs(Modal.Body,{children:[/*#__PURE__*/_jsx(Container,{children:!product.cartProducts?/*#__PURE__*/_jsx(Row,{children:\"\\u041D\\u0435\\u0442 \\u0434\\u043E\\u0431\\u0430\\u0432\\u043B\\u0435\\u043D\\u043D\\u044B\\u0445 \\u0442\\u043E\\u0432\\u0430\\u0440\\u043E\\u0432\"}):product.cartProducts.map(function(item){return/*#__PURE__*/_jsxs(Row,{className:\"d-flex justify-content-center align-items-center\",style:{marginTop:'10px',marginBottom:'10px'},children:[/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsx(\"img\",{style:{width:'50px',height:'50px'},src:item.scr,alt:\"\"})}),/*#__PURE__*/_jsx(Col,{md:3,children:item.name}),/*#__PURE__*/_jsxs(Col,{md:2,children:[/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return changeQuantityHandler(item.quantity-1,item.productid);},variant:\"light\",className:\"mr-2\",children:\"-\"}),item.quantity,/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return changeQuantityHandler(item.quantity+1,item.productid);},className:\"ml-2\",variant:\"light\",children:\"+\"})]}),/*#__PURE__*/_jsxs(Col,{md:2,children:[item.price,\" \\u0440.\"]}),/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return deleteProduct(item.productid);},variant:\"dark\",children:/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",width:\"16\",height:\"16\",fill:\"currentColor\",class:\"bi bi-x\",viewBox:\"0 0 16 16\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z\"})})})})]},item.id);})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:6}),/*#__PURE__*/_jsx(Col,{md:6,children:/*#__PURE__*/_jsx(\"h3\",{children:\"C\\u0443\\u043C\\u043C\\u0430 \\u0437\\u0430\\u043A\\u0430\\u0437\\u0430: \".concat(totalAmount,\" \\u0440.\")})})]}),/*#__PURE__*/_jsx(Row,{style:{display:'flex',marginLeft:'10px',marginTop:'20px',marginBottom:'20px'},children:/*#__PURE__*/_jsx(\"h4\",{children:\"\\u0423 \\u0432\\u0430\\u0441 \\u043F\\u0440\\u0435\\u043A\\u0440\\u0430\\u0441\\u043D\\u044B\\u0439 \\u0432\\u043A\\u0443\\u0441!\"})}),/*#__PURE__*/_jsxs(Form,{className:\"d-flex align-items-center justify-content-center flex-column mb-5 w-75\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"mt-3\",children:\"\\u041A\\u043E\\u043D\\u0442\\u0430\\u043A\\u0442\\u043D\\u044B\\u0435 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0435\"}),/*#__PURE__*/_jsx(Form.Control,{placeholder:\"\\u0412\\u0430\\u0448 email\",value:user.user.email,type:\"email\"}),/*#__PURE__*/_jsx(Form.Control,{value:phone,className:\"phone_mask\",type:\"text\",mask:\"+7(999) 999-99-99\",placeholder:\"+7(999) 999-99-99\",onChange:function onChange(e){return handlePhoneChange(e);}}),/*#__PURE__*/_jsx(\"h5\",{className:\"mt-3\",children:\"\\u0414\\u043E\\u0441\\u0442\\u0430\\u0432\\u043A\\u0430\"}),/*#__PURE__*/_jsx(Form.Control,{value:address,placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0430\\u0434\\u0440\\u0435\\u0441 \\u0434\\u043E\\u0441\\u0442\\u0430\\u0432\\u043A\\u0438\",type:\"text\",onChange:function onChange(e){return handleAddressChange(e);}})]}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',marginLeft:'10px',marginTop:'5px'},children:/*#__PURE__*/_jsxs(Col,{children:[/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(\"p\",{children:\"\\u041C\\u044B \\u0441\\u0432\\u044F\\u0436\\u0435\\u043C\\u0441\\u044F \\u0441 \\u0432\\u0430\\u043C\\u0438 \\u0434\\u043B\\u044F \\u043F\\u043E\\u0434\\u0442\\u0432\\u0435\\u0440\\u0436\\u0434\\u0435\\u043D\\u0438\\u044F \\u0437\\u0430\\u043A\\u0430\\u0437\\u0430.\"})}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(\"p\",{children:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u043C\\u0435\\u0440\\u043A\\u0438 \\u043A \\u0437\\u0430\\u043A\\u0430\\u0437\\u0443 \\u043C\\u043E\\u0436\\u043D\\u043E \\u0432 \\u0432\\u0430\\u0448\\u0435\\u043C \\u043F\\u0440\\u043E\\u0444\\u0438\\u043B\\u0435.\"})})]})})]}),/*#__PURE__*/_jsx(Modal.Footer,{children:/*#__PURE__*/_jsx(Button,{variant:\"light\",onClick:function onClick(){return sendOrder();},children:\"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C \\u0434\\u043B\\u044F \\u043F\\u043E\\u0434\\u0442\\u0432\\u0435\\u0440\\u0436\\u0434\\u0435\\u043D\\u0438\\u044F\"})})]});});export default CartModal;","map":{"version":3,"sources":["C:/Users/licos/Desktop/projects/shop_online/client/src/components/Modals/CartModal.js"],"names":["React","useEffect","useState","useContext","Modal","Button","Form","Container","Row","Col","Spinner","deleteProductFrCartProducts","fetchCartProductsByCartId","changeCartProducts","sendCart","observer","Context","CartModal","show","onHide","product","user","cartInfo","setCartInfo","phone","setPhone","address","setAddress","images","setImages","gotImages","setGotImages","cartProducts","console","log","handlePhoneChange","e","val","target","value","handleAddressChange","userAddress","totalAmount","forEach","element","price","quantity","deleteProduct","productId","cart","then","data","finally","setCartProducts","changeQuantityHandler","newQuantity","sendOrder","setCart","alert","map","item","marginTop","marginBottom","width","height","scr","name","productid","id","display","marginLeft","email"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useContext } from 'react'\r\nimport { Modal, Button, Form, Container, Row, Col, Spinner } from 'react-bootstrap'\r\nimport { deleteProductFrCartProducts, fetchCartProductsByCartId, changeCartProducts, sendCart } from './../../http/productAPI'\r\nimport { observer } from 'mobx-react-lite'\r\nimport { Context } from './../../index'\r\n//import { createGender } from '../../http/productAPI'\r\n\r\nconst CartModal = observer(({ show, onHide }) => {\r\n\r\n    const { product, user } = useContext(Context)\r\n    const [cartInfo, setCartInfo] = useState([])\r\n    const [phone, setPhone] = useState('')\r\n    const [address, setAddress] = useState('')\r\n    const [images, setImages] = useState([])\r\n    const [gotImages, setGotImages] = useState(false)\r\n    \r\n\r\n    if (!product.cartProducts) {\r\n        console.log('NONONO')\r\n    }\r\n\r\n    const handlePhoneChange = (e) => {\r\n        let val = e.target.value;\r\n        setPhone(val)\r\n    }\r\n    const handleAddressChange = (e) => {\r\n        let userAddress = e.target.value;\r\n        setAddress(userAddress)\r\n    }\r\n\r\n    let totalAmount = 0\r\n\r\n    if (show) {\r\n        console.log(user)\r\n        product.cartProducts.forEach(element => {\r\n            totalAmount = element.price * element.quantity + totalAmount\r\n        });\r\n    }\r\n\r\n    const deleteProduct = (productId) => {\r\n        console.log('product', product.cart)\r\n        deleteProductFrCartProducts(product.cart, productId).then((data) => {\r\n            console.log(data)\r\n        }).finally(() => {\r\n            fetchCartProductsByCartId(product.cart).then(data => {\r\n                product.setCartProducts(data)\r\n            })\r\n        })\r\n    }\r\n\r\n    const changeQuantityHandler = (newQuantity, productId) => {\r\n        if (newQuantity === 0) {\r\n            //delete from cart\r\n            deleteProduct(productId)\r\n        } else {\r\n            changeCartProducts(product.cart, productId, newQuantity).then((data) => {\r\n                fetchCartProductsByCartId(product.cart).then(data => {\r\n                    product.setCartProducts(data)\r\n                })\r\n            })\r\n        }\r\n    }\r\n\r\n    const sendOrder = () => {\r\n        sendCart(product.cart).then((data) => {\r\n            console.log(data)\r\n        }).finally(() => {\r\n            onHide()\r\n            product.setCartProducts([])\r\n            product.setCart(null)\r\n            alert('Заказ отправлен')\r\n        })\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    return (\r\n        <Modal\r\n            show={show}\r\n            onHide={onHide}\r\n            size=\"lg\"\r\n            top\r\n        >\r\n            <Modal.Header closeButton>\r\n                <Modal.Title id=\"contained-modal-title-vcenter\">\r\n                    Ваш заказ\r\n                </Modal.Title>\r\n            </Modal.Header>\r\n            <Modal.Body>\r\n                <Container>\r\n                {!product.cartProducts? \r\n                   <Row>\r\n                        Нет добавленных товаров\r\n                    </Row>\r\n                :\r\n                product.cartProducts.map((item) => {\r\n                        return (\r\n                            <Row className=\"d-flex justify-content-center align-items-center\" key={item.id} style={{ marginTop: '10px', marginBottom: '10px' }}>\r\n                                <Col md={2}>\r\n                                    <img\r\n                                        style={{ width: '50px', height: '50px' }}\r\n                                        src={item.scr} alt=''></img>\r\n                                </Col>\r\n                                <Col md={3}>\r\n                                    {item.name}\r\n                                </Col>\r\n                                <Col md={2}>\r\n                                    <Button\r\n                                        onClick={() => changeQuantityHandler(item.quantity - 1, item.productid)}\r\n                                        variant=\"light\" className=\"mr-2\">-</Button>\r\n                                    {item.quantity}\r\n                                    <Button\r\n                                        onClick={() => changeQuantityHandler(item.quantity + 1, item.productid)}\r\n                                        className=\"ml-2\" variant=\"light\">+</Button>\r\n                                </Col>\r\n                                <Col md={2}>\r\n                                    {item.price} р.\r\n                                </Col>\r\n                                <Col md={2}>\r\n                                    <Button\r\n                                        onClick={() => deleteProduct(item.productid)}\r\n                                        variant=\"dark\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-x\" viewBox=\"0 0 16 16\">\r\n                                            <path d=\"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z\" />\r\n                                        </svg></Button>\r\n                                </Col>\r\n                            </Row>\r\n                        )\r\n                    })}\r\n                    \r\n                </Container>\r\n                <br />\r\n                <Row>\r\n                    <Col md={6}>\r\n                    </Col>\r\n                    <Col md={6}>\r\n                        <h3>{`Cумма заказа: ${totalAmount} р.`}</h3>\r\n                    </Col>\r\n                </Row>\r\n                <Row style={{ display: 'flex', marginLeft: '10px', marginTop: '20px', marginBottom: '20px' }}>\r\n                    <h4>У вас прекрасный вкус!</h4>\r\n                </Row>\r\n\r\n                <Form\r\n                    className=\"d-flex align-items-center justify-content-center flex-column mb-5 w-75\"\r\n                >\r\n                    <h5 className=\"mt-3\">Контактные данные</h5>\r\n                    <Form.Control\r\n                        placeholder='Ваш email'\r\n                        value={user.user.email}\r\n                        type='email'\r\n                    />\r\n                    <Form.Control\r\n                        value={phone}\r\n                        className=\"phone_mask\"\r\n                        type=\"text\"\r\n                        mask=\"+7(999) 999-99-99\"\r\n                        placeholder=\"+7(999) 999-99-99\"\r\n                        onChange={(e) => handlePhoneChange(e)}\r\n                    />\r\n                    <h5 className=\"mt-3\">Доставка</h5>\r\n                    <Form.Control\r\n                        value={address}\r\n                        placeholder='Введите адрес доставки'\r\n                        type='text'\r\n                        onChange={(e) => handleAddressChange(e)}\r\n                    />\r\n                </Form>\r\n                <div style={{ display: 'flex', marginLeft: '10px', marginTop: '5px' }}>\r\n                    <Col>\r\n                        <Row>\r\n                            <p>Мы свяжемся с вами для подтверждения заказа.</p>\r\n                        </Row>\r\n                        <Row>\r\n                            <p>Добавить мерки к заказу можно в вашем профиле.</p>\r\n                        </Row>\r\n                    </Col>\r\n                </div>\r\n            </Modal.Body>\r\n            <Modal.Footer>\r\n                <Button variant={\"light\"} onClick={() => sendOrder()}>Отправить для подтверждения</Button>\r\n            </Modal.Footer>\r\n        </Modal >\r\n    )\r\n})\r\n\r\nexport default CartModal;"]},"metadata":{},"sourceType":"module"}