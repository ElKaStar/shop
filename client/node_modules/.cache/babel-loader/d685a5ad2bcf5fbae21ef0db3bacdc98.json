{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\licos\\\\Desktop\\\\projects\\\\shop_online\\\\client\\\\src\\\\pages\\\\ProductPage.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState, useContext } from 'react';\nimport { Container, Col, Row, Card, Button, Spinner } from 'react-bootstrap';\nimport CarouselComponent from '../components/Carousel';\nimport star from '../accets/star.jpg';\nimport { useParams } from 'react-router-dom';\nimport { observer } from 'mobx-react-lite';\nimport { fetchOneProduct, fetchCart, createCart, createCartProducts, fetchTypeById, fetchCartProductsByCartIdAndProductId, fetchCartProductsByCartId } from '../http/productAPI';\nimport { Context } from '../index';\nimport PopUp from '../components/Modals/PopUp';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ProductPage = observer(_c = _s(() => {\n  _s();\n\n  const {\n    product,\n    user\n  } = useContext(Context);\n  const [state, setState] = useState({\n    info: [],\n    images: []\n  });\n  const [isLoading, setIsLoading] = useState(true);\n  const [cart, setCart] = useState();\n  const [isCart, setIsCart] = useState(false);\n  const {\n    id\n  } = useParams();\n  const [popUpVisible, setPopUpVisible] = useState(false);\n  const [selectedType, setSelectedType] = useState();\n  useEffect(() => {\n    fetchOneProduct(id).then(data => setState(data)).finally(() => {\n      setIsLoading(false);\n\n      if (!state.typeId) {} else {\n        fetchTypeById(state.typeId).then(data => setSelectedType(data.name));\n      }\n\n      fetchCart(user.user.id).then(data => {\n        if (!data || data.result === 'not found') {} else {\n          setCart(data.id);\n          product.setCart(data.id);\n          fetchCartProductsByCartIdAndProductId(data.id, id).then(data => {\n            try {\n              if (!data) {\n                console.log('here f');\n                setIsCart(false);\n              } else if (data.length === 0) {\n                setIsCart(false);\n              } else {\n                setIsCart(true);\n              }\n            } catch (error) {\n              throw error;\n            }\n          });\n        }\n      });\n    });\n  }, [user, state.typeId]);\n\n  const showPopUp = () => {\n    console.log('isCart', isCart);\n    alert(\"Товар добавлен в корзину\");\n  };\n\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(Spinner, {\n      animation: \"grow\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 12\n    }, this);\n  }\n\n  const adjImages = state.images.map(e => {\n    return fs.readFile(process.env.REACT_APP_API_URL + `static/${e.scr}`);\n  });\n\n  const addToCart = () => {\n    console.log('cart', cart);\n\n    if (!cart) {\n      createCart(user.user.id).then(data => {\n        setCart(data.id);\n        product.setCart(data.id);\n        createCartProducts(data.id, id, state.price, 1).then(data => {}).finally(() => {\n          setIsCart(true);\n          showPopUp();\n          fetchCartProductsByCartId(data.id).then(data => {\n            product.setCartProducts(data);\n          });\n        });\n      });\n    } else {\n      createCartProducts(cart, id, state.price, 1).then(data => {}).finally(() => {\n        setIsCart(true);\n        showPopUp();\n      });\n    }\n\n    fetchCartProductsByCartId(cart).then(data => {\n      product.setCartProducts(data);\n    });\n  };\n\n  let count = 0;\n\n  const getCount = () => {\n    count++;\n    return count;\n  };\n\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: /*#__PURE__*/_jsxDEV(Row, {\n      className: \"mt-3\",\n      children: [/*#__PURE__*/_jsxDEV(Col, {\n        md: 8,\n        children: /*#__PURE__*/_jsxDEV(CarouselComponent, {\n          images: adjImages\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        md: 4,\n        children: [/*#__PURE__*/_jsxDEV(Card, {\n          className: \"d-flex flex-column align-items-left justify-content-around border-0\",\n          children: [\" \", /*#__PURE__*/_jsxDEV(\"h3\", {\n            style: {\n              fontSize: '22px',\n              marginTop: '2px'\n            },\n            children: [state.name, \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 13\n          }, this), !selectedType ? '' : /*#__PURE__*/_jsxDEV(\"p\", {\n            children: `Размещено в разделе: ${selectedType}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 35\n          }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            style: {\n              fontSize: '18px'\n            },\n            children: [\"\\u0426\\u0435\\u043D\\u0430: \", state.price, \" \\u0440\\u0443\\u0431.\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 13\n          }, this), isCart ? /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mt-3\",\n            variant: \"outline-dark\",\n            style: {\n              boxShadow: 'rgba(50, 50, 93, 0.25) 0px 30px 60px -12px inset, rgba(0, 0, 0, 0.3) 0px 18px 36px -18px inset;'\n            },\n            children: \"\\u0422\\u043E\\u0432\\u0430\\u0440 \\u0434\\u043E\\u0431\\u0430\\u0432\\u043B\\u0435\\u043D \\u0432 \\u043A\\u043E\\u0440\\u0437\\u0438\\u043D\\u0443\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(Button, {\n            className: \"mt-3\",\n            variant: \"outline-dark\",\n            onClick: () => addToCart(),\n            children: \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0432 \\u043A\\u043E\\u0440\\u0437\\u0438\\u043D\\u0443\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"mt-5 mb-3\",\n          style: {\n            fontSize: '20px'\n          },\n          children: \"\\u0425\\u0430\\u0440\\u0430\\u043A\\u0442\\u0435\\u0440\\u0438\\u0441\\u0442\\u0438\\u043A\\u0438\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 11\n        }, this), state.info.map((i, index) => {\n          return /*#__PURE__*/_jsxDEV(Row, {\n            className: \"d-flex mt-2\",\n            style: {\n              background: index % 2 !== 0 ? \"lightgray\" : \"transparant\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(Col, {\n              md: 3,\n              children: getCount()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Col, {\n              md: 9,\n              children: i.description\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 146,\n              columnNumber: 15\n            }, this)]\n          }, i.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 21\n          }, this);\n        })]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 109,\n    columnNumber: 5\n  }, this);\n}, \"KWfSLakCQV2O7b5KJtzswqhuckw=\", false, function () {\n  return [useParams];\n}));\n_c2 = ProductPage;\nexport default ProductPage;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"ProductPage$observer\");\n$RefreshReg$(_c2, \"ProductPage\");","map":{"version":3,"sources":["C:/Users/licos/Desktop/projects/shop_online/client/src/pages/ProductPage.js"],"names":["React","useEffect","useState","useContext","Container","Col","Row","Card","Button","Spinner","CarouselComponent","star","useParams","observer","fetchOneProduct","fetchCart","createCart","createCartProducts","fetchTypeById","fetchCartProductsByCartIdAndProductId","fetchCartProductsByCartId","Context","PopUp","ProductPage","product","user","state","setState","info","images","isLoading","setIsLoading","cart","setCart","isCart","setIsCart","id","popUpVisible","setPopUpVisible","selectedType","setSelectedType","then","data","finally","typeId","name","result","console","log","length","error","showPopUp","alert","adjImages","map","e","fs","readFile","process","env","REACT_APP_API_URL","scr","addToCart","price","setCartProducts","count","getCount","fontSize","marginTop","boxShadow","i","index","background","description"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useContext } from 'react'\r\nimport { Container, Col, Row, Card, Button, Spinner } from 'react-bootstrap';\r\nimport CarouselComponent from '../components/Carousel'\r\nimport star from '../accets/star.jpg'\r\nimport { useParams } from 'react-router-dom'\r\nimport { observer } from 'mobx-react-lite'\r\nimport { fetchOneProduct, fetchCart, createCart, createCartProducts, fetchTypeById, fetchCartProductsByCartIdAndProductId, fetchCartProductsByCartId } from '../http/productAPI'\r\nimport { Context } from '../index'\r\nimport PopUp from '../components/Modals/PopUp'\r\n\r\nconst ProductPage = observer(() => {\r\n  const { product, user } = useContext(Context)\r\n  const [state, setState] = useState({ info: [], images: [] })\r\n  const [isLoading, setIsLoading] = useState(true)\r\n  const [cart, setCart] = useState()\r\n  const [isCart, setIsCart] = useState(false)\r\n  const { id } = useParams()\r\n  const [popUpVisible, setPopUpVisible] = useState(false)\r\n  const [selectedType, setSelectedType] = useState()\r\n\r\n  useEffect(() => {\r\n    fetchOneProduct(id).then(data => setState(data)).finally(() => {\r\n      setIsLoading(false)\r\n      if (!state.typeId) {\r\n\r\n      } else {\r\n        fetchTypeById(state.typeId).then(data => setSelectedType(data.name))\r\n      }\r\n      \r\n      fetchCart(user.user.id).then(data => {\r\n        if (!data || data.result === 'not found') {\r\n\r\n        } else {\r\n          setCart(data.id)\r\n          product.setCart(data.id)\r\n          fetchCartProductsByCartIdAndProductId(data.id, id).then(data => {\r\n            \r\n            try {\r\n              if (!data) {\r\n                console.log('here f')\r\n                setIsCart(false)\r\n              } else if (data.length === 0) {\r\n                setIsCart(false)\r\n              } else {\r\n                setIsCart(true)\r\n              }\r\n            } catch (error) {\r\n              throw error\r\n            }\r\n\r\n          })\r\n        }\r\n      })\r\n    })\r\n\r\n  }, [user, state.typeId])\r\n\r\n  const showPopUp = () => {\r\n    console.log('isCart', isCart)\r\n    alert(\"Товар добавлен в корзину\")\r\n  }\r\n\r\n\r\n\r\n  if (isLoading) {\r\n    return <Spinner animation={\"grow\"} />\r\n  }\r\n\r\n  const adjImages = state.images.map(e => {\r\n    return  fs.readFile(process.env.REACT_APP_API_URL + `static/${e.scr}`)\r\n  })\r\n\r\n  const addToCart = () => {\r\n    console.log('cart', cart)\r\n    if (!cart) {\r\n      createCart(user.user.id).then(data => {\r\n        setCart(data.id)\r\n        product.setCart(data.id)\r\n        createCartProducts(data.id, id, state.price, 1).then(data => {\r\n        }).finally(() => {\r\n          setIsCart(true)\r\n          showPopUp()\r\n          fetchCartProductsByCartId(data.id).then(data => {\r\n            product.setCartProducts(data)\r\n          })\r\n        })\r\n      })\r\n    } else {\r\n      createCartProducts(cart, id, state.price, 1).then(data => {\r\n      }).finally(() => {\r\n        setIsCart(true)\r\n        showPopUp()\r\n      })\r\n    }\r\n    fetchCartProductsByCartId(cart).then(data => {\r\n      product.setCartProducts(data)\r\n    })\r\n\r\n  }\r\n\r\n  let count = 0\r\n  const getCount = () => {\r\n    count++\r\n    return count\r\n  }\r\n\r\n\r\n  return (\r\n    <Container>\r\n      <Row className=\"mt-3\">\r\n        <Col md={8}>\r\n          <CarouselComponent images={adjImages} />\r\n        </Col>\r\n        <Col md={4}>\r\n          <Card\r\n            className=\"d-flex flex-column align-items-left justify-content-around border-0\"\r\n          > <h3 style={{ fontSize: '22px', marginTop: '2px' }}>{state.name} </h3>\r\n            {!selectedType ? '' : <p>{`Размещено в разделе: ${selectedType}`}</p>}\r\n            <hr />\r\n            <h3 style={{ fontSize: '18px' }}>Цена: {state.price} руб.</h3>\r\n            <hr />\r\n            {isCart ?\r\n              <p\r\n                className=\"mt-3\"\r\n                variant={\"outline-dark\"}\r\n                style={{ boxShadow: 'rgba(50, 50, 93, 0.25) 0px 30px 60px -12px inset, rgba(0, 0, 0, 0.3) 0px 18px 36px -18px inset;' }}\r\n              >Товар добавлен в корзину</p>\r\n              :\r\n              <Button\r\n                className=\"mt-3\"\r\n                variant={\"outline-dark\"}\r\n                onClick={() => addToCart()}\r\n              >Добавить в корзину</Button>}\r\n          </Card>\r\n          <h3 className=\"mt-5 mb-3\" style={{ fontSize: '20px' }}>Характеристики</h3>\r\n          {state.info.map((i, index) => {\r\n\r\n            return (<Row\r\n              key={i.id}\r\n              className=\"d-flex mt-2\"\r\n              style={{ background: index % 2 !== 0 ? \"lightgray\" : \"transparant\" }}\r\n            >\r\n              <Col md={3}>\r\n                {getCount()}\r\n              </Col>\r\n              <Col md={9}>\r\n                {i.description}\r\n              </Col>\r\n            </Row>)\r\n          })}\r\n        </Col>\r\n      </Row>\r\n    </Container>\r\n  )\r\n})\r\n\r\nexport default ProductPage;"]},"metadata":{},"sourceType":"module"}